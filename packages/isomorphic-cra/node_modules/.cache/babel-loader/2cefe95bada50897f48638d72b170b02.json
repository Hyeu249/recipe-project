{"ast":null,"code":"var _jsxFileName = \"/home/tht-hieu/Desktop/template-copy/shared/containers/FirestoreCRUD/Article/Article.js\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport articleActions from \"@iso/redux/articles/actions\";\nimport Input, { Textarea } from \"@iso/components/uielements/input\";\nimport Select, { SelectOption as Option } from \"@iso/components/uielements/select\";\nimport Modal from \"@iso/components/Feedback/Modal\";\nimport LayoutContentWrapper from \"@iso/components/utility/layoutWrapper\";\nimport Box from \"@iso/components/utility/box\";\nimport ContentHolder from \"@iso/components/utility/contentHolder\";\nimport Popconfirms from \"@iso/components/Feedback/Popconfirm\";\nimport { EditIcon, DeleteIcon } from \"@iso/config/icon.config\";\nimport { ActionBtn, Fieldset, Form, Label, TitleWrapper, ButtonHolders, ActionWrapper, ComponentTitle, TableWrapper, StatusTag } from \"./Article.styles\";\nconst {\n  loadFromFireStore,\n  resetFireStoreDocuments,\n  saveIntoFireStore,\n  toggleModal,\n  update\n} = articleActions;\nexport default function Articles() {\n  const {\n    articles,\n    article,\n    modalActive,\n    isLoading\n  } = useSelector(state => state.Articles);\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    dispatch(loadFromFireStore());\n  }, [dispatch]);\n\n  const handleRecord = (actionName, article) => {\n    if (article.key && actionName !== \"delete\") actionName = \"update\";\n    dispatch(saveIntoFireStore(article, actionName));\n  };\n\n  const resetRecords = () => {\n    dispatch(resetFireStoreDocuments());\n  };\n\n  const handleModal = (article = null) => {\n    dispatch(toggleModal(article));\n  };\n\n  const onRecordChange = (event, key) => {\n    if (key) article[key] = event.target.value;\n    dispatch(update(article));\n  };\n\n  const onSelectChange = (key, value) => {\n    if (key) article[key] = value;\n    dispatch(update(article));\n  };\n\n  const dataSource = [];\n  Object.keys(articles).map((article, index) => {\n    return dataSource.push({ ...articles[article],\n      key: article\n    });\n  });\n  const rowSelection = {\n    onChange: (selectedRowKeys, selectedRows) => {}\n  };\n  const columns = [{\n    title: \"Title\",\n    dataIndex: \"title\",\n    key: \"title\",\n    width: \"200px\",\n    sorter: (a, b) => {\n      if (a.title < b.title) return -1;\n      if (a.title > b.title) return 1;\n      return 0;\n    },\n    render: (text, row) => {\n      const trimByWord = sentence => {\n        let result = sentence;\n        let resultArray = result.split(\" \");\n\n        if (resultArray.length > 7) {\n          resultArray = resultArray.slice(0, 7);\n          result = resultArray.join(\" \") + \"...\";\n        }\n\n        return result;\n      };\n\n      return trimByWord(row.title);\n    }\n  }, {\n    title: \"Description\",\n    dataIndex: \"description\",\n    key: \"description\",\n    width: \"360px\",\n    sorter: (a, b) => {\n      if (a.description < b.description) return -1;\n      if (a.description > b.description) return 1;\n      return 0;\n    },\n    render: (text, row) => {\n      const trimByWord = sentence => {\n        let result = sentence;\n        let resultArray = result.split(\" \");\n\n        if (resultArray.length > 20) {\n          resultArray = resultArray.slice(0, 20);\n          result = resultArray.join(\" \") + \"...\";\n        }\n\n        return result;\n      };\n\n      return trimByWord(row.description);\n    }\n  }, {\n    title: \"Excerpt\",\n    dataIndex: \"excerpt\",\n    key: \"excerpt\",\n    width: \"220px\",\n    sorter: (a, b) => {\n      if (a.excerpt < b.excerpt) return -1;\n      if (a.excerpt > b.excerpt) return 1;\n      return 0;\n    },\n    render: (text, row) => {\n      const trimByWord = sentence => {\n        let result = sentence;\n        let resultArray = result.split(\" \");\n\n        if (resultArray.length > 8) {\n          resultArray = resultArray.slice(0, 8);\n          result = resultArray.join(\" \") + \"...\";\n        }\n\n        return result;\n      };\n\n      return trimByWord(row.excerpt);\n    }\n  }, {\n    title: \"Slugs\",\n    dataIndex: \"slug\",\n    width: \"170px\",\n    key: \"slug\",\n    sorter: (a, b) => {\n      if (a.slug < b.slug) return -1;\n      if (a.slug > b.slug) return 1;\n      return 0;\n    }\n  }, {\n    title: \"Status\",\n    dataIndex: \"status\",\n    className: \"noWrapCell\",\n    key: \"status\",\n    sorter: (a, b) => {\n      if (a.status < b.status) return -1;\n      if (a.status > b.status) return 1;\n      return 0;\n    },\n    render: (text, row) => {\n      let className;\n\n      if (row.status === (\"draft\" || \"Draft\" || \"DRAFT\")) {\n        className = \"draft\";\n      } else if (row.status === (\"publish\" || \"Publish\" || \"PUBLISH\")) {\n        className = \"publish\";\n      }\n\n      return /*#__PURE__*/React.createElement(StatusTag, {\n        className: className,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 16\n        }\n      }, row.status);\n    }\n  }, {\n    title: \"Actions\",\n    key: \"action\",\n    width: \"60px\",\n    className: \"noWrapCell\",\n    render: (text, row) => {\n      return /*#__PURE__*/React.createElement(ActionWrapper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => handleModal(row),\n        href: \"# \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(EditIcon, {\n        size: 18,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Popconfirms, {\n        title: \"Are you sure to delete this article\\uFF1F\",\n        okText: \"Yes\",\n        cancelText: \"No\",\n        placement: \"topRight\",\n        onConfirm: () => handleRecord(\"delete\", row),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"deleteBtn\",\n        href: \"# \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(DeleteIcon, {\n        size: 18,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 17\n        }\n      }))));\n    }\n  }];\n  return /*#__PURE__*/React.createElement(LayoutContentWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ContentHolder, {\n    style: {\n      marginTop: 0,\n      overflow: \"hidden\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TitleWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ComponentTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, \"Articles\"), /*#__PURE__*/React.createElement(ButtonHolders, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ActionBtn, {\n    type: \"danger\",\n    onClick: resetRecords,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }, \"Reset record\"), /*#__PURE__*/React.createElement(ActionBtn, {\n    type: \"primary\",\n    onClick: () => console.log(\"hoat dong\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 15\n    }\n  }, \"Add new record\"))), /*#__PURE__*/React.createElement(Modal, {\n    visible: modalActive,\n    onClose: () => dispatch(toggleModal(null)),\n    title: article.key ? \"Update Article\" : \"Add New Article\",\n    okText: article.key ? \"Update Article\" : \"Add Article\",\n    onOk: () => handleRecord(\"insert\", article),\n    onCancel: () => dispatch(toggleModal(null)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 17\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(Input, {\n    label: \"Title\",\n    placeholder: \"Enter Title\",\n    value: article.title,\n    onChange: e => onRecordChange(e, \"title\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(Textarea, {\n    label: \"Description\",\n    placeholder: \"Enter Description\",\n    rows: 5,\n    value: article.description,\n    onChange: e => onRecordChange(e, \"description\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }\n  }, \"Excerpt\"), /*#__PURE__*/React.createElement(Textarea, {\n    label: \"Excerpt\",\n    rows: 5,\n    placeholder: \"Enter excerpt\",\n    value: article.excerpt,\n    onChange: e => onRecordChange(e, \"excerpt\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 17\n    }\n  }, \"Slug\"), /*#__PURE__*/React.createElement(Input, {\n    label: \"Slug\",\n    placeholder: \"Enter Slugs\",\n    value: article.slug,\n    onChange: e => onRecordChange(e, \"slug\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 17\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(Select, {\n    defaultValue: article.status,\n    placeholder: \"Enter Status\",\n    onChange: value => onSelectChange(\"status\", value),\n    style: {\n      width: \"170px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"draft\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 19\n    }\n  }, \"Draft\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"publish\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 19\n    }\n  }, \"Publish\"))))), /*#__PURE__*/React.createElement(TableWrapper, {\n    rowKey: \"key\",\n    rowSelection: rowSelection,\n    columns: columns,\n    bordered: true,\n    dataSource: dataSource,\n    loading: isLoading,\n    className: \"isoSimpleTable\",\n    pagination: {\n      // defaultPageSize: 1,\n      hideOnSinglePage: true,\n      total: dataSource.length,\n      showTotal: (total, range) => {\n        return `Showing ${range[0]}-${range[1]} of ${dataSource.length} Results`;\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/tht-hieu/Desktop/template-copy/shared/containers/FirestoreCRUD/Article/Article.js"],"names":["React","useDispatch","useSelector","articleActions","Input","Textarea","Select","SelectOption","Option","Modal","LayoutContentWrapper","Box","ContentHolder","Popconfirms","EditIcon","DeleteIcon","ActionBtn","Fieldset","Form","Label","TitleWrapper","ButtonHolders","ActionWrapper","ComponentTitle","TableWrapper","StatusTag","loadFromFireStore","resetFireStoreDocuments","saveIntoFireStore","toggleModal","update","Articles","articles","article","modalActive","isLoading","state","dispatch","useEffect","handleRecord","actionName","key","resetRecords","handleModal","onRecordChange","event","target","value","onSelectChange","dataSource","Object","keys","map","index","push","rowSelection","onChange","selectedRowKeys","selectedRows","columns","title","dataIndex","width","sorter","a","b","render","text","row","trimByWord","sentence","result","resultArray","split","length","slice","join","description","excerpt","slug","className","status","marginTop","overflow","console","log","e","hideOnSinglePage","total","showTotal","range"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport articleActions from \"@iso/redux/articles/actions\";\nimport Input, { Textarea } from \"@iso/components/uielements/input\";\nimport Select, {\n  SelectOption as Option,\n} from \"@iso/components/uielements/select\";\nimport Modal from \"@iso/components/Feedback/Modal\";\nimport LayoutContentWrapper from \"@iso/components/utility/layoutWrapper\";\nimport Box from \"@iso/components/utility/box\";\nimport ContentHolder from \"@iso/components/utility/contentHolder\";\nimport Popconfirms from \"@iso/components/Feedback/Popconfirm\";\nimport { EditIcon, DeleteIcon } from \"@iso/config/icon.config\";\nimport {\n  ActionBtn,\n  Fieldset,\n  Form,\n  Label,\n  TitleWrapper,\n  ButtonHolders,\n  ActionWrapper,\n  ComponentTitle,\n  TableWrapper,\n  StatusTag,\n} from \"./Article.styles\";\nconst {\n  loadFromFireStore,\n  resetFireStoreDocuments,\n  saveIntoFireStore,\n  toggleModal,\n  update,\n} = articleActions;\nexport default function Articles() {\n  const { articles, article, modalActive, isLoading } = useSelector(\n    (state) => state.Articles\n  );\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    dispatch(loadFromFireStore());\n  }, [dispatch]);\n  const handleRecord = (actionName, article) => {\n    if (article.key && actionName !== \"delete\") actionName = \"update\";\n    dispatch(saveIntoFireStore(article, actionName));\n  };\n  const resetRecords = () => {\n    dispatch(resetFireStoreDocuments());\n  };\n\n  const handleModal = (article = null) => {\n    dispatch(toggleModal(article));\n  };\n\n  const onRecordChange = (event, key) => {\n    if (key) article[key] = event.target.value;\n    dispatch(update(article));\n  };\n\n  const onSelectChange = (key, value) => {\n    if (key) article[key] = value;\n    dispatch(update(article));\n  };\n\n  const dataSource = [];\n  Object.keys(articles).map((article, index) => {\n    return dataSource.push({\n      ...articles[article],\n      key: article,\n    });\n  });\n\n  const rowSelection = {\n    onChange: (selectedRowKeys, selectedRows) => {},\n  };\n\n  const columns = [\n    {\n      title: \"Title\",\n      dataIndex: \"title\",\n      key: \"title\",\n      width: \"200px\",\n      sorter: (a, b) => {\n        if (a.title < b.title) return -1;\n        if (a.title > b.title) return 1;\n        return 0;\n      },\n      render: (text, row) => {\n        const trimByWord = (sentence) => {\n          let result = sentence;\n          let resultArray = result.split(\" \");\n          if (resultArray.length > 7) {\n            resultArray = resultArray.slice(0, 7);\n            result = resultArray.join(\" \") + \"...\";\n          }\n          return result;\n        };\n\n        return trimByWord(row.title);\n      },\n    },\n    {\n      title: \"Description\",\n      dataIndex: \"description\",\n      key: \"description\",\n      width: \"360px\",\n      sorter: (a, b) => {\n        if (a.description < b.description) return -1;\n        if (a.description > b.description) return 1;\n        return 0;\n      },\n      render: (text, row) => {\n        const trimByWord = (sentence) => {\n          let result = sentence;\n          let resultArray = result.split(\" \");\n          if (resultArray.length > 20) {\n            resultArray = resultArray.slice(0, 20);\n            result = resultArray.join(\" \") + \"...\";\n          }\n          return result;\n        };\n\n        return trimByWord(row.description);\n      },\n    },\n    {\n      title: \"Excerpt\",\n      dataIndex: \"excerpt\",\n      key: \"excerpt\",\n      width: \"220px\",\n      sorter: (a, b) => {\n        if (a.excerpt < b.excerpt) return -1;\n        if (a.excerpt > b.excerpt) return 1;\n        return 0;\n      },\n      render: (text, row) => {\n        const trimByWord = (sentence) => {\n          let result = sentence;\n          let resultArray = result.split(\" \");\n          if (resultArray.length > 8) {\n            resultArray = resultArray.slice(0, 8);\n            result = resultArray.join(\" \") + \"...\";\n          }\n          return result;\n        };\n\n        return trimByWord(row.excerpt);\n      },\n    },\n    {\n      title: \"Slugs\",\n      dataIndex: \"slug\",\n      width: \"170px\",\n      key: \"slug\",\n      sorter: (a, b) => {\n        if (a.slug < b.slug) return -1;\n        if (a.slug > b.slug) return 1;\n        return 0;\n      },\n    },\n    {\n      title: \"Status\",\n      dataIndex: \"status\",\n      className: \"noWrapCell\",\n      key: \"status\",\n      sorter: (a, b) => {\n        if (a.status < b.status) return -1;\n        if (a.status > b.status) return 1;\n        return 0;\n      },\n\n      render: (text, row) => {\n        let className;\n        if (row.status === (\"draft\" || \"Draft\" || \"DRAFT\")) {\n          className = \"draft\";\n        } else if (row.status === (\"publish\" || \"Publish\" || \"PUBLISH\")) {\n          className = \"publish\";\n        }\n        return <StatusTag className={className}>{row.status}</StatusTag>;\n      },\n    },\n    {\n      title: \"Actions\",\n      key: \"action\",\n      width: \"60px\",\n      className: \"noWrapCell\",\n      render: (text, row) => {\n        return (\n          <ActionWrapper>\n            <a onClick={() => handleModal(row)} href=\"# \">\n              <EditIcon size={18} />\n            </a>\n\n            <Popconfirms\n              title=\"Are you sure to delete this article？\"\n              okText=\"Yes\"\n              cancelText=\"No\"\n              placement=\"topRight\"\n              onConfirm={() => handleRecord(\"delete\", row)}\n            >\n              <a className=\"deleteBtn\" href=\"# \">\n                <DeleteIcon size={18} />\n              </a>\n            </Popconfirms>\n          </ActionWrapper>\n        );\n      },\n    },\n  ];\n\n  return (\n    <LayoutContentWrapper>\n      <Box>\n        <ContentHolder style={{ marginTop: 0, overflow: \"hidden\" }}>\n          <TitleWrapper>\n            <ComponentTitle>Articles</ComponentTitle>\n\n            <ButtonHolders>\n              <ActionBtn type=\"danger\" onClick={resetRecords}>\n                Reset record\n              </ActionBtn>\n\n              {/* <ActionBtn type=\"primary\" onClick={() => handleModal(null)}> */}\n              <ActionBtn\n                type=\"primary\"\n                onClick={() => console.log(\"hoat dong\")}\n              >\n                Add new record\n              </ActionBtn>\n            </ButtonHolders>\n          </TitleWrapper>\n\n          <Modal\n            visible={modalActive}\n            onClose={() => dispatch(toggleModal(null))}\n            title={article.key ? \"Update Article\" : \"Add New Article\"}\n            okText={article.key ? \"Update Article\" : \"Add Article\"}\n            onOk={() => handleRecord(\"insert\", article)}\n            onCancel={() => dispatch(toggleModal(null))}\n          >\n            <Form>\n              <Fieldset>\n                <Label>Title</Label>\n                <Input\n                  label=\"Title\"\n                  placeholder=\"Enter Title\"\n                  value={article.title}\n                  onChange={(e) => onRecordChange(e, \"title\")}\n                />\n              </Fieldset>\n\n              <Fieldset>\n                <Label>Description</Label>\n                <Textarea\n                  label=\"Description\"\n                  placeholder=\"Enter Description\"\n                  rows={5}\n                  value={article.description}\n                  onChange={(e) => onRecordChange(e, \"description\")}\n                />\n              </Fieldset>\n\n              <Fieldset>\n                <Label>Excerpt</Label>\n                <Textarea\n                  label=\"Excerpt\"\n                  rows={5}\n                  placeholder=\"Enter excerpt\"\n                  value={article.excerpt}\n                  onChange={(e) => onRecordChange(e, \"excerpt\")}\n                />\n              </Fieldset>\n\n              <Fieldset>\n                <Label>Slug</Label>\n\n                <Input\n                  label=\"Slug\"\n                  placeholder=\"Enter Slugs\"\n                  value={article.slug}\n                  onChange={(e) => onRecordChange(e, \"slug\")}\n                />\n              </Fieldset>\n\n              <Fieldset>\n                <Label>Status</Label>\n                <Select\n                  defaultValue={article.status}\n                  placeholder=\"Enter Status\"\n                  onChange={(value) => onSelectChange(\"status\", value)}\n                  style={{ width: \"170px\" }}\n                >\n                  <Option value=\"draft\">Draft</Option>\n                  <Option value=\"publish\">Publish</Option>\n                </Select>\n              </Fieldset>\n            </Form>\n          </Modal>\n          <TableWrapper\n            rowKey=\"key\"\n            rowSelection={rowSelection}\n            columns={columns}\n            bordered={true}\n            dataSource={dataSource}\n            loading={isLoading}\n            className=\"isoSimpleTable\"\n            pagination={{\n              // defaultPageSize: 1,\n              hideOnSinglePage: true,\n              total: dataSource.length,\n              showTotal: (total, range) => {\n                return `Showing ${range[0]}-${range[1]} of ${dataSource.length} Results`;\n              },\n            }}\n          />\n        </ContentHolder>\n      </Box>\n    </LayoutContentWrapper>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}