{"ast":null,"code":"var _jsxFileName = \"/home/tht-hieu/Desktop/template-copy/packages/isomorphic-cra/src/containers/Topbar/TopbarAddToCart.js\";\nimport React from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport IntlMessages from '@iso/components/utility/intlMessages';\nimport Scrollbar from '@iso/components/utility/customScrollBar';\nimport Popover from '@iso/components/uielements/popover';\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\nimport { TopbarCartIcon } from '@iso/config/icon.config';\nconst {\n  initData,\n  changeViewTopbarCart,\n  changeProductQuantity\n} = ecommerceAction;\nlet totalPrice;\nexport default function TopbarAddtoCart() {\n  let {\n    url\n  } = useRouteMatch();\n  const dispatch = useDispatch();\n  const customizedTheme = useSelector(state => state.ThemeSwitcher.topbarTheme);\n  const {\n    productQuantity,\n    products,\n    loadingInitData,\n    viewTopbarCart\n  } = useSelector(state => state.Ecommerce);\n\n  function hide() {\n    dispatch(changeViewTopbarCart(false));\n  }\n\n  function handleVisibleChange() {\n    dispatch(changeViewTopbarCart(!viewTopbarCart));\n  }\n\n  React.useEffect(() => {\n    if (!loadingInitData) {\n      dispatch(initData());\n    }\n  }, [dispatch, loadingInitData]);\n\n  function renderProducts() {\n    totalPrice = 0;\n\n    if (!productQuantity || productQuantity.length === 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"isoNoItemMsg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }\n      }, \"No item found\"));\n    }\n\n    return productQuantity.map(product => {\n      totalPrice += product.quantity * products[product.objectID].price;\n      return /*#__PURE__*/React.createElement(SingleCart, Object.assign({\n        key: product.objectID,\n        quantity: product.quantity,\n        changeQuantity: changeQuantity,\n        cancelQuantity: cancelQuantity\n      }, products[product.objectID], {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }\n      }));\n    });\n  }\n\n  function changeQuantity(objectID, quantity) {\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      } else {\n        newProductQuantity.push({\n          objectID,\n          quantity\n        });\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n\n  function cancelQuantity(objectID) {\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n\n  const content = /*#__PURE__*/React.createElement(TopbarDropdownWrapper, {\n    className: \"topbarAddtoCart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoDropdownHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"sidebar.cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoDropdownBody isoCartItemsWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Scrollbar, {\n    style: {\n      height: 300\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, renderProducts())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoDropdownFooterLinks\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `${url}/cart`,\n    onClick: hide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"topbar.viewCart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"topbar.totalPrice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }), \":\", ' ', /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"$\", totalPrice.toFixed(2)))));\n  return /*#__PURE__*/React.createElement(Popover, {\n    content: content,\n    trigger: \"click\",\n    visible: viewTopbarCart,\n    onVisibleChange: handleVisibleChange,\n    placement: \"bottomLeft\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoIconWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TopbarCartIcon, {\n    size: 24,\n    color: customizedTheme.textColor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }), productQuantity.length === 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, \"0\") : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, productQuantity.length)));\n}","map":{"version":3,"sources":["/home/tht-hieu/Desktop/template-copy/packages/isomorphic-cra/src/containers/Topbar/TopbarAddToCart.js"],"names":["React","Link","useRouteMatch","useDispatch","useSelector","IntlMessages","Scrollbar","Popover","SingleCart","ecommerceAction","TopbarDropdownWrapper","TopbarCartIcon","initData","changeViewTopbarCart","changeProductQuantity","totalPrice","TopbarAddtoCart","url","dispatch","customizedTheme","state","ThemeSwitcher","topbarTheme","productQuantity","products","loadingInitData","viewTopbarCart","Ecommerce","hide","handleVisibleChange","useEffect","renderProducts","length","map","product","quantity","objectID","price","changeQuantity","cancelQuantity","newProductQuantity","forEach","push","content","height","toFixed","textColor"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport IntlMessages from '@iso/components/utility/intlMessages';\nimport Scrollbar from '@iso/components/utility/customScrollBar';\nimport Popover from '@iso/components/uielements/popover';\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\nimport { TopbarCartIcon } from '@iso/config/icon.config';\n\nconst {\n  initData,\n  changeViewTopbarCart,\n  changeProductQuantity,\n} = ecommerceAction;\nlet totalPrice;\nexport default function TopbarAddtoCart() {\n  let { url } = useRouteMatch();\n  const dispatch = useDispatch();\n  const customizedTheme = useSelector(\n    (state) => state.ThemeSwitcher.topbarTheme\n  );\n  const {\n    productQuantity,\n    products,\n    loadingInitData,\n    viewTopbarCart,\n  } = useSelector((state) => state.Ecommerce);\n\n  function hide() {\n    dispatch(changeViewTopbarCart(false));\n  }\n  function handleVisibleChange() {\n    dispatch(changeViewTopbarCart(!viewTopbarCart));\n  }\n  React.useEffect(() => {\n    if (!loadingInitData) {\n      dispatch(initData());\n    }\n  }, [dispatch, loadingInitData]);\n\n  function renderProducts() {\n    totalPrice = 0;\n    if (!productQuantity || productQuantity.length === 0) {\n      return (\n        <div className=\"isoNoItemMsg\">\n          <span>No item found</span>\n        </div>\n      );\n    }\n    return productQuantity.map((product) => {\n      totalPrice += product.quantity * products[product.objectID].price;\n      return (\n        <SingleCart\n          key={product.objectID}\n          quantity={product.quantity}\n          changeQuantity={changeQuantity}\n          cancelQuantity={cancelQuantity}\n          {...products[product.objectID]}\n        />\n      );\n    });\n  }\n  function changeQuantity(objectID, quantity) {\n    const newProductQuantity = [];\n    productQuantity.forEach((product) => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      } else {\n        newProductQuantity.push({\n          objectID,\n          quantity,\n        });\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n  function cancelQuantity(objectID) {\n    const newProductQuantity = [];\n    productQuantity.forEach((product) => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n\n  const content = (\n    <TopbarDropdownWrapper className=\"topbarAddtoCart\">\n      <div className=\"isoDropdownHeader\">\n        <h3>\n          <IntlMessages id=\"sidebar.cart\" />\n        </h3>\n      </div>\n      <div className=\"isoDropdownBody isoCartItemsWrapper\">\n        <Scrollbar style={{ height: 300 }}>{renderProducts()}</Scrollbar>\n      </div>\n      <div className=\"isoDropdownFooterLinks\">\n        <Link to={`${url}/cart`} onClick={hide}>\n          <IntlMessages id=\"topbar.viewCart\" />\n        </Link>\n\n        <h3>\n          <IntlMessages id=\"topbar.totalPrice\" />:{' '}\n          <span>${totalPrice.toFixed(2)}</span>\n        </h3>\n      </div>\n    </TopbarDropdownWrapper>\n  );\n  return (\n    <Popover\n      content={content}\n      trigger=\"click\"\n      visible={viewTopbarCart}\n      onVisibleChange={handleVisibleChange}\n      placement=\"bottomLeft\"\n    >\n      <div className=\"isoIconWrapper\">\n        <TopbarCartIcon size={24} color={customizedTheme.textColor} />\n        {productQuantity.length === 0 ? (\n          <span>0</span>\n        ) : (\n          <span>{productQuantity.length}</span>\n        )}\n      </div>\n    </Popover>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}